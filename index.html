<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora Ofertas - Electricidad y Gas</title>
<link rel="stylesheet" href="css/styles.css">
</head>
<body>
<div class="container">
<h1>âš¡ğŸ”¥ Calculadora Ofertas - Electricidad y Gas</h1>
<p class="subtitle">Compara T2, GAS RL1 y T3 - Pega datos de tus facturas</p>
<div class="info-text">ğŸ“Š T2 y GAS con histÃ³rico incluido | T3 comparaciÃ³n directa por mes</div>

<div class="tabs">
<button class="tab active" onclick="cambiarTab('t2')">âš¡ ELECTRICIDAD T2</button>
<button class="tab" onclick="cambiarTab('gas')">ğŸ”¥ GAS RL1</button>
<button class="tab" onclick="cambiarTab('t3')">âš¡ ELECTRICIDAD T3</button>
</div>

<!-- TAB T2 -->
<div id="tab-t2" class="tab-content active">
<div class="offers-container">
<div class="offer-card">
<div class="offer-header"><div class="offer-title">ğŸ  Oferta Actual</div></div>
<div class="company-name">
<label>ğŸ¢ Nombre de la CompaÃ±Ã­a</label>
<input type="text" id="t2-actual-nombre" placeholder="Ej: Iberdrola">
</div>
<div class="power-group">
<span class="power-group-title">âš¡ Potencia instalada y coste en â‚¬/kW</span>
<div class="two-cols">
<div>
<div class="form-group"><label>Potencia Punta (kW)</label><input type="number" id="t2-actual-pot-punta-kw" step="0.001" placeholder="Ej: 2.2"></div>
<div class="form-group"><label>Coste Punta</label><input type="number" id="t2-actual-pot-punta-precio" step="0.001" placeholder="Ej: 0.042">
<div class="unit-selector"><label><input type="radio" name="t2-actual-unit-punta" value="dia" checked> â‚¬/kW/dÃ­a</label><label><input type="radio" name="t2-actual-unit-punta" value="ano"> â‚¬/kW/aÃ±o</label></div></div>
</div>
<div>
<div class="form-group"><label>Potencia Valle (kW)</label><input type="number" id="t2-actual-pot-valle-kw" step="0.001" placeholder="Ej: 6.6"></div>
<div class="form-group"><label>Coste Valle</label><input type="number" id="t2-actual-pot-valle-precio" step="0.001" placeholder="Ej: 0.018">
<div class="unit-selector"><label><input type="radio" name="t2-actual-unit-valle" value="dia" checked> â‚¬/kW/dÃ­a</label><label><input type="radio" name="t2-actual-unit-valle" value="ano"> â‚¬/kW/aÃ±o</label></div></div>
</div>
</div>
</div>
<div class="energy-group">
<span class="energy-group-title">ğŸ’¡ Coste en â‚¬/kWh de la energÃ­a consumida</span>
<div class="form-group"><label>Precio Punta (â‚¬/kWh)</label><input type="number" id="t2-actual-punta" step="0.001" placeholder="Ej: 0.15"></div>
<div class="form-group"><label>Precio Llano (â‚¬/kWh)</label><input type="number" id="t2-actual-llano" step="0.001" placeholder="Ej: 0.12"></div>
<div class="form-group"><label>Precio Valle (â‚¬/kWh)</label><input type="number" id="t2-actual-valle" step="0.001" placeholder="Ej: 0.08"></div>
<button class="copy-btn" onclick="copiarTarifaPlanaT2('actual')">ğŸ“‹ Copiar tarifa plana (mismo precio en los 3)</button>
</div>
<div class="discount-group">
<label>ğŸ’° Descuento EnergÃ­a (%)</label>
<input type="number" id="t2-actual-dto" step="0.1" placeholder="0" value="0">
<small style="color:#1976D2">Se aplica a punta, llano y valle</small>
</div>
</div>
<div class="offer-card nueva">
<div class="offer-header"><div class="offer-title">âœ¨ Oferta Nueva</div><button class="reset-btn" onclick="resetNuevaOferta()">ğŸ”„ Limpiar</button></div>
<div class="company-name">
<label>ğŸ¢ Nombre de la CompaÃ±Ã­a</label>
<input type="text" id="t2-nueva-nombre" placeholder="Ej: Endesa">
</div>
<div class="power-group">
<span class="power-group-title">âš¡ Potencia instalada y coste en â‚¬/kW</span>
<div class="two-cols">
<div>
<div class="form-group"><label>Potencia Punta (kW)</label><input type="number" id="t2-nueva-pot-punta-kw" step="0.001" placeholder="Ej: 2.2"></div>
<div class="form-group"><label>Coste Punta</label><input type="number" id="t2-nueva-pot-punta-precio" step="0.001" placeholder="Ej: 0.040">
<div class="unit-selector"><label><input type="radio" name="t2-nueva-unit-punta" value="dia" checked> â‚¬/kW/dÃ­a</label><label><input type="radio" name="t2-nueva-unit-punta" value="ano"> â‚¬/kW/aÃ±o</label></div></div>
</div>
<div>
<div class="form-group"><label>Potencia Valle (kW)</label><input type="number" id="t2-nueva-pot-valle-kw" step="0.001" placeholder="Ej: 6.6"></div>
<div class="form-group"><label>Coste Valle</label><input type="number" id="t2-nueva-pot-valle-precio" step="0.001" placeholder="Ej: 0.016">
<div class="unit-selector"><label><input type="radio" name="t2-nueva-unit-valle" value="dia" checked> â‚¬/kW/dÃ­a</label><label><input type="radio" name="t2-nueva-unit-valle" value="ano"> â‚¬/kW/aÃ±o</label></div></div>
</div>
</div>
</div>
<div class="energy-group">
<span class="energy-group-title">ğŸ’¡ Coste en â‚¬/kWh de la energÃ­a consumida</span>
<div class="form-group"><label>Precio Punta (â‚¬/kWh)</label><input type="number" id="t2-nueva-punta" step="0.001" placeholder="Ej: 0.14"></div>
<div class="form-group"><label>Precio Llano (â‚¬/kWh)</label><input type="number" id="t2-nueva-llano" step="0.001" placeholder="Ej: 0.11"></div>
<div class="form-group"><label>Precio Valle (â‚¬/kWh)</label><input type="number" id="t2-nueva-valle" step="0.001" placeholder="Ej: 0.07"></div>
<button class="copy-btn" onclick="copiarTarifaPlanaT2('nueva')">ğŸ“‹ Copiar tarifa plana (mismo precio en los 3)</button>
</div>
<div class="discount-group">
<label>ğŸ’° Descuento EnergÃ­a (%)</label>
<input type="number" id="t2-nueva-dto" step="0.1" placeholder="0" value="0">
<small style="color:#1976D2">Se aplica a punta, llano y valle</small>
</div>
</div>
</div>
</div>

<!-- TAB GAS -->
<div id="tab-gas" class="tab-content">
<div class="offers-container">
<div class="offer-card">
<div class="offer-header"><div class="offer-title">ğŸ  Oferta Actual</div></div>
<div class="company-name">
<label>ğŸ¢ Nombre de la CompaÃ±Ã­a</label>
<input type="text" id="gas-actual-nombre" placeholder="Ej: Naturgy">
</div>
<div class="form-group"><label>TÃ©rmino Fijo</label><input type="number" id="gas-actual-fijo" step="0.001" placeholder="Ej: 0.35">
<div class="unit-selector"><label><input type="radio" name="gas-actual-unit" value="dia" checked> â‚¬/dÃ­a</label><label><input type="radio" name="gas-actual-unit" value="mes"> â‚¬/mes</label></div></div>
<div class="form-group"><label>TÃ©rmino Variable (â‚¬/kWh)</label><input type="number" id="gas-actual-variable" step="0.001" placeholder="Ej: 0.05"></div>
<div class="discount-group">
<label>ğŸ’° Descuento Consumo (%)</label>
<input type="number" id="gas-actual-dto" step="0.1" placeholder="0" value="0">
<small style="color:#1976D2">Se aplica al tÃ©rmino variable</small>
</div>
</div>
<div class="offer-card nueva">
<div class="offer-header"><div class="offer-title">âœ¨ Oferta Nueva</div></div>
<div class="company-name">
<label>ğŸ¢ Nombre de la CompaÃ±Ã­a</label>
<input type="text" id="gas-nueva-nombre" placeholder="Ej: Repsol">
</div>
<div class="form-group"><label>TÃ©rmino Fijo</label><input type="number" id="gas-nueva-fijo" step="0.001" placeholder="Ej: 0.30">
<div class="unit-selector"><label><input type="radio" name="gas-nueva-unit" value="dia" checked> â‚¬/dÃ­a</label><label><input type="radio" name="gas-nueva-unit" value="mes"> â‚¬/mes</label></div></div>
<div class="form-group"><label>TÃ©rmino Variable (â‚¬/kWh)</label><input type="number" id="gas-nueva-variable" step="0.001" placeholder="Ej: 0.045"></div>
<div class="discount-group">
<label>ğŸ’° Descuento Consumo (%)</label>
<input type="number" id="gas-nueva-dto" step="0.1" placeholder="0" value="0">
<small style="color:#1976D2">Se aplica al tÃ©rmino variable</small>
</div>
</div>
</div>
</div>

<!-- TAB T3 -->
<div id="tab-t3" class="tab-content">
<div class="info-text">ğŸ“Œ T3: ComparaciÃ³n por mes seleccionado (sin histÃ³rico). Elige tu mes de mayor consumo para mejor estimaciÃ³n.</div>
<div class="form-group" style="max-width:300px;margin:0 auto 20px">
<label>ğŸ“… Mes de ComparaciÃ³n</label>
<select id="t3-mes">
<option value="0">Enero</option>
<option value="1">Febrero</option>
<option value="2">Marzo</option>
<option value="3">Abril</option>
<option value="4">Mayo</option>
<option value="5">Junio</option>
<option value="6">Julio</option>
<option value="7">Agosto</option>
<option value="8">Septiembre</option>
<option value="9">Octubre</option>
<option value="10">Noviembre</option>
<option value="11">Diciembre</option>
</select>
</div>
<div class="offers-container">
<div class="offer-card">
<div class="offer-header"><div class="offer-title">ğŸ  Oferta Actual</div></div>
<div class="company-name">
<label>ğŸ¢ Nombre de la CompaÃ±Ã­a</label>
<input type="text" id="t3-actual-nombre" placeholder="Ej: Mi compaÃ±Ã­a">
</div>
<div class="paste-group">
<label>ğŸ“‹ Pega Potencias de tu Factura (P1-P6)</label>
<textarea id="t3-actual-potencias" placeholder="Pega aquÃ­:
Periodo P1 (01/12/2024 - 31/12/2024): 13,5000 kW * 0,042931 â‚¬/kW dÃ­a * 31 dÃ­as 17,97 â‚¬
Periodo P2 (01/12/2024 - 31/12/2024): 16,4540 kW * 0,026084 â‚¬/kW dÃ­a * 31 dÃ­as 13,30 â‚¬
..."></textarea>
<small>Se extraerÃ¡ kW y â‚¬/kW/dÃ­a para P1-P6</small>
</div>
<div class="paste-group">
<label>ğŸ“‹ Pega Precios EnergÃ­a de tu Factura (P1-P6)</label>
<textarea id="t3-actual-energia" placeholder="Pega aquÃ­ los precios de energÃ­a:
Precio P1: 0,150 â‚¬/kWh
Precio P2: 0,140 â‚¬/kWh
..."></textarea>
<small>Se extraerÃ¡ precio en â‚¬/kWh para P1-P6</small>
</div>
<div class="discount-group">
<label>ğŸ’° Descuento EnergÃ­a (%)</label>
<input type="number" id="t3-actual-dto" step="0.1" placeholder="0" value="0">
<small style="color:#1976D2">Se aplica a todos los precios de energÃ­a</small>
</div>
</div>
<div class="offer-card nueva">
<div class="offer-header"><div class="offer-title">âœ¨ Oferta Nueva</div></div>
<div class="company-name">
<label>ğŸ¢ Nombre de la CompaÃ±Ã­a</label>
<input type="text" id="t3-nueva-nombre" placeholder="Ej: Oferta T3">
</div>
<div class="paste-group">
<label>ğŸ“‹ Pega Potencias de la Oferta (P1-P6)</label>
<textarea id="t3-nueva-potencias" placeholder="Pega aquÃ­ los datos de potencia..."></textarea>
<small>Se extraerÃ¡ kW y â‚¬/kW/dÃ­a para P1-P6</small>
</div>
<div class="paste-group">
<label>ğŸ“‹ Pega Precios EnergÃ­a de la Oferta (P1-P6)</label>
<textarea id="t3-nueva-energia" placeholder="Pega aquÃ­ los precios de energÃ­a..."></textarea>
<small>Se extraerÃ¡ precio en â‚¬/kWh para P1-P6</small>
</div>
<div class="discount-group">
<label>ğŸ’° Descuento EnergÃ­a (%)</label>
<input type="number" id="t3-nueva-dto" step="0.1" placeholder="0" value="0">
<small style="color:#1976D2">Se aplica a todos los precios de energÃ­a</small>
</div>
</div>
</div>
</div>

<button class="calculate-btn" onclick="calcular()">ğŸ“Š CALCULAR Y COMPARAR</button>

<div id="results" class="results hidden"></div>
<div id="historico" class="historico hidden">
<div class="historico-header">
<div class="historico-title">ğŸ“œ HistÃ³rico</div>
<div class="historico-actions">
<button class="btn-secondary" onclick="exportarHistorico()">ğŸ“¥ Exportar</button>
<button class="btn-secondary" onclick="document.getElementById('importFile').click()">ğŸ“¤ Importar</button>
<button class="btn-secondary btn-danger" onclick="limpiarHistorico()">ğŸ—‘ï¸ Limpiar</button>
</div>
</div>
<div id="historico-list" class="historico-list"><div class="historico-empty">No hay ofertas guardadas</div></div>
</div>
</div>
<input type="file" id="importFile" class="file-input" accept=".json" onchange="importarHistorico(event)">

<script src="js/app.js"></script>
</body>
</html>
